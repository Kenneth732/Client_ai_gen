!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ad25a88c-2ef6-4946-b315-030a43c66984",e._sentryDebugIdIdentifier="sentry-dbid-ad25a88c-2ef6-4946-b315-030a43c66984")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7642],{71457:function(e,t,l){l.d(t,{g:function(){return r}});var a=l(20567),s=l(47702),n=l(85893),i=l(57851);let r=e=>{var{className:t}=e,l=(0,s._)(e,["className"]);return(0,n.jsx)("div",(0,a._)({className:(0,i.m)("animate-pulse rounded-xl bg-gray-200",t)},l))}},7642:function(e,t,l){l.d(t,{Z:function(){return I}});var a=l(20567),s=l(85893),n=l(88903),i=l(31104),r=l(32822),c=l.n(r),o=l(67294),d=l(55678);let u=[{label:"4x",factor:4,cost:1},{label:"8x",factor:8,cost:1},{label:"16x",factor:16,cost:2}];var x=l(22949),m=l(50319),f=l(417);let p=e=>{let[t,{loading:l,data:s,error:n}]=(0,m.D)(f.J,(0,a._)({fetchPolicy:"no-cache"},e));return{mutateFunction:t,loading:l,data:s,error:n}};var h=l(80063),v=l(74540),g=l(45067),b=l(71457),y=l(14932),j=l(47702),w=l(55372),N=l(93015),k=l(10387),D=l(88266);let C=e=>{var{scale:t,size:l,cost:n,unlimited:i,status:r,url:c,title:u,onClick:m,checked:f}=e,p=(0,j._)(e,["scale","size","cost","unlimited","status","url","title","onClick","checked"]);let[h,v]=(0,o.useState)(!1),{user:g}=(0,x.a)(),b=g&&"anonymous"!==g.provider&&g.premium,C=-1!==n&&!b,E=async()=>{if(c){v(!0);try{await (0,k.S)(c,"".concat(t," - ").concat(u),"image")}catch(e){d.Am.error(e.message||"Couldn't download the file")}finally{v(!1)}}};return(0,s.jsx)("li",{className:(0,N.Z)("relative outline-none",f?"bg-[#550FD0]/5":""),children:(0,s.jsxs)("button",(0,y._)((0,a._)({type:"button",onClick:e=>{if(C){d.Am.error("This feature is available for Pro users only.");return}"completed"===r&&c&&E(),m&&m(e)},className:"flex h-full w-full cursor-pointer items-center justify-between px-3 py-3 text-dark-2 transition-all hover:bg-gray-50"},p),{children:[(0,s.jsxs)("div",{className:(0,N.Z)("flex flex-col items-start",C&&"opacity-70"),children:[(0,s.jsx)("span",{className:"text-left text-base font-bold text-[#403E3D]",children:t}),(0,s.jsx)("span",{className:"text-left text-[13px] font-medium text-[#838281]",children:l})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center",children:["submitted"===r||"processing"===r?(0,s.jsx)("span",{className:"block min-w-[100px] rounded-full px-3 py-2 text-sm",children:(0,s.jsxs)("div",{className:"flex items-center justify-center",children:["Processing \xa0",(0,s.jsx)(D.a,{fill:"#550FD0"})]})}):"completed"===r?(0,s.jsx)("span",{className:"block min-w-[100px] rounded-full px-3 py-2 text-sm",children:(0,s.jsx)("div",{className:"flex items-center justify-center",children:h?(0,s.jsxs)(s.Fragment,{children:["Downloading \xa0",(0,s.jsx)(D.a,{fill:"#550FD0"})]}):"Download"})}):-1===n?(0,s.jsx)("span",{className:"block min-w-[100px] rounded-full text-right text-sm font-bold text-[#403E3D]",children:"1 Credit"}):i?(0,s.jsxs)("div",{className:"relative flex flex-col items-end justify-center",children:[(0,s.jsx)("p",{className:"text-right text-sm font-bold text-[#403E3D]",children:"Unlimited"}),(0,s.jsx)("p",{className:"text-right text-[13px] font-medium text-[#838281]",children:"1 credit"})]}):0===n?(0,s.jsx)("span",{className:"block min-w-[100px] rounded-full text-right text-sm font-bold text-[#403E3D]",children:"FREE"}):(0,s.jsx)("span",{className:"block rounded-full text-right text-sm font-bold text-[#403E3D]",children:g&&"anonymous"!==g.provider&&!g.premium?(0,s.jsx)(w.Z,{user:g,title:"PRO ONLY",className:"-mr-4 scale-75"}):(0,s.jsx)(s.Fragment,{children:n>1?"".concat(n," Credits"):"".concat(n," Credit")})}),!C&&(0,s.jsxs)("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"relative ml-4 h-7 w-7 flex-shrink-0 flex-grow-0",preserveAspectRatio:"none",children:[(0,s.jsx)("rect",{width:28,height:28,rx:14,className:"transition-all",fill:f?"#550FD0":"#fff"}),(0,s.jsx)("rect",{x:"0.5",y:"0.5",width:27,height:27,rx:"13.5",stroke:"black",strokeOpacity:"0.2"}),(0,s.jsx)("circle",{cx:14,cy:14,r:6,fill:"white"})]})]})]}))})},E=e=>{let{show:t=!0,loading:l,creation:a,upscales:n,variation:i,type:r,selectedUpscale:c,setSelectedUpscale:o}=e,{user:d}=(0,x.a)(),m=e=>{o(e)};return t?l?(0,s.jsx)(b.g,{className:"h-12 w-32"}):(0,s.jsx)("ul",{className:"menu z-[99] w-full min-w-[360px] rounded-2xl border-[.33px] bg-white font-semibold text-dark-3 md:max-w-[500px]",children:a&&n?u.map((e,t)=>{var l;let r=n.find(t=>i?t.factor===e.factor&&t.variationId===i.id:t.factor===e.factor),{cost:o}=e,u=null==d?void 0:d.premium,x=u&&(null==d?void 0:null===(l=d.proVersion)||void 0===l?void 0:l.includes(g.$c.unlimitedPro))||!1;return u||4!==e.factor?u&&4===e.factor&&(o=0):o=-1,(0,s.jsx)(C,{size:"".concat(e.factor*a.width," x ").concat(e.factor*a.height),scale:e.label,cost:o,checked:(null==c?void 0:c.factor)===e.factor,unlimited:x&&8===e.factor,onClick:()=>{m(e)},status:null==r?void 0:r.status,url:null==r?void 0:r.url,title:null==a?void 0:a.title},t)}):null}):null};var I=e=>{let{onCompleted:t,type:l,image:r,variationId:m}=e,[f,g]=(0,o.useState)(u[0]),{isModalOpen:b,closeModal:y}=(0,h.Z)(),{user:j}=(0,x.a)();null==j||j.premium,(0,o.useEffect)(()=>{(null==r?void 0:r.base64)||y()},[y,r]);let{mutateFunction:w,loading:N}=p({onCompleted:()=>{d.Am.success("Successfully started upscale"),y(),t&&t()},onError:e=>{d.Am.error(e.message)}}),k=[],D=(e,t)=>{var a;if(!f){d.Am.error("Please select an upscale option.");return}if(-1===t){(0,d.Am)("\uD83D\uDCB0 This is only available for Pro users!");return}let s=null==k?void 0:k.find(t=>t.factor===e);if(null==s||!s.status){if(j&&j.credits<=0&&t>0&&!(j.premium&&j.proVersion.includes("unlimited"))){(0,d.Am)("\uD83D\uDCB0 You don't have enough Lumens, buy more to upscale!");return}w({variables:{type:l,scale:e,variationId:"CREATION"===l?m:null,externalImage:"EXTERNAL"===l?null==r?void 0:null===(a=r.base64)||void 0===a?void 0:a.split(",")[1]:null}})}};return(0,s.jsx)(n.u,{appear:!0,show:b,as:o.Fragment,children:(0,s.jsxs)(i.Vq,{as:"div",className:"relative z-[9999]",onClose:y,children:[(0,s.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black/25"})}),(0,s.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,s.jsx)(n.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(i.Vq.Panel,{className:"max-h-[90vh] w-max transform overflow-hidden rounded-3xl bg-white p-8 text-left align-middle shadow-xl transition-all",children:[(0,s.jsxs)("div",{className:"mb-6 flex w-full items-center justify-between",children:[(0,s.jsx)(i.Vq.Title,{as:"h3",className:"text-left text-2xl font-bold text-[#403E3D]",children:"Upscale"}),(0,s.jsx)(c(),{onClick:y,icon:"x",size:"24",className:"cursor-pointer text-[#838281] transition-all hover:text-black"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-4 md:flex-row",children:[(0,s.jsx)("img",{draggable:!1,className:"max-w-full rounded-lg object-contain md:max-w-xs lg:max-w-sm",src:null==r?void 0:r.base64,style:{maxHeight:"40vh"}}),(0,s.jsxs)("div",{className:"flex w-full flex-col gap-4 md:flex-1",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-base font-bold text-[#403E3D]",children:"Upscale amount"}),(0,s.jsx)(E,{setSelectedUpscale:g,selectedUpscale:f,creation:(0,a._)({},r),show:!0,type:l,upscales:u})]}),(0,s.jsx)(v.c1,{disabled:N,onClick:()=>D(f.factor,f.cost),loading:N,loadingText:"Processing...",className:"mt-auto flex w-full items-center justify-center gap-2 bg-[#550FD0] text-center text-base font-bold text-white",children:"Upscale"})]})]})]})})})})]})})}},417:function(e,t,l){l.d(t,{J:function(){return n}});var a=l(82729);function s(){let e=(0,a._)(["\n  mutation UpscaleV2(\n    $externalImage: String\n    $scale: Int!\n    $type: UpscaleType!\n    $variationId: String\n  ) {\n    upscaleV2(\n      externalImage: $externalImage\n      scale: $scale\n      type: $type\n      variationId: $variationId\n    ) {\n      creation {\n        variations {\n          id\n        }\n      }\n      externalUpscale {\n        id\n        initImage\n        status\n        url\n      }\n      success\n      user {\n        credits\n        id\n      }\n    }\n  }\n"]);return s=function(){return e},e}let n=(0,l(41667).Ps)(s())},10387:function(e,t,l){l.d(t,{G:function(){return c},S:function(){return r}});var a=l(93162),s=l(55733),n=l.n(s);function i(e){return e.replace(/[^\w\-. ]/g,"").trim().substring(0,50)}async function r(e,t,l){let s=await fetch(e),n=await s.blob();(0,a.saveAs)(n,i(t)+("image"===l?".png":".mp4"))}async function c(e,t,l,s){let r=new(n());(await Promise.all(e.map(async e=>(await fetch(e)).blob()))).forEach((e,l)=>{r.file(i(t[l])+("image"===s?".png":".mp4"),e,{binary:!0})});let c=await r.generateAsync({type:"blob"});(0,a.saveAs)(c,"".concat(i(l),".zip"))}},80063:function(e,t,l){let a=(0,l(64529).Ue)(e=>({isModalOpen:!1,openModal:()=>e({isModalOpen:!0}),closeModal:()=>e({isModalOpen:!1})}));t.Z=a}}]);